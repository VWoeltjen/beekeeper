<html>
<head>
    <link rel="stylesheet" href="beekeeper.css">
</head>
<body>
    <table id = "from"></table>
    <table id = "to"></table>
    <table id = "selected"></table>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var columns = [
                { key: "address", header: "Address" },
                { key: "count", header: "Transfers" },
                { key: "value", header: "Total" }
            ];

            ["from", "to"].forEach(function (type) {
                var path = "/" + type;
                var table = document.getElementById(type);

                var head = document.createElement('thead');
                columns.forEach(function (column) {
                    var th = document.createElement('th');
                    th.textContent = column.header;
                    head.appendChild(th);
                });
                table.appendChild(head);

                fetch(new Request(path)).then(function (response) {
                    return response.json();
                }).then(function (rows) {
                    rows.forEach(function (row) {
                        var tr = document.createElement('tr');
                        columns.forEach(function (column) {
                            var td = document.createElement('td');
                            td.textContent = row[column.key];
                            tr.appendChild(td);
                        });
                        table.appendChild(tr);
                    });
                });
            });
        });
    </script>
</body>
</html>